<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trang Web Du Lịch</title>
    <link rel="stylesheet" href="index.css">
</head>
<body>
    <header>
        <h1>
           <a href="about us.HTML"> <img src="images/image1.png" alt = "TrungLH Travel" width="150"></a>
        </h1>
        <nav>
            <ul>
                <li><a href="flight_booking.html">Đặt Vé Máy Bay</a></li>
                <li><a href="hotel_booking.html">Đặt Khách Sạn</a></li>
                <li><a href="login.html">Nạp tiền</a></li>
                <li><a href="login.html">Đăng Nhập</a></li>
                <li><a href="register.html">Đăng Ký</a></li>
                
            </ul>
        </nav>
    </header>
    
    <section class="hero">
        <h2>TRẢI NGHIỆM CÁC DỊCH VỤ DU LỊCH ĐỘC ĐÁO CÙNG TRUNGLH TRAVEL</h2>
        
        <div class="search-bar">
            <input type="text" placeholder="Nhập điểm đến...">
            <button>Tìm kiếm ngay</button>
        </div>
    </section>
    
    <h3>Đặt Combo Du Lịch Với Giá Ưu Đãi Ngay</h3>
   
    <section class="combo-container" id="combo-container-index">
        <!-- Tour cards will be dynamically loaded here -->
    </section>
    
    <h4>
         
    </h4>
    
    
        <footer>
            <div class="footer-container">
                <div class="footer-logo">
                    <a href="about us.HTML"> <img src="images/image1.png" alt = "TrungLH Travel" width="150"></a>
                </div>
                <div class="footer-social">
                    <a href="#"><img src="images/x-icon.png" alt="X"></a>
                    <a href="#"><img src="images/instagram-icon.png" alt="Instagram"></a>
                    <a href="#"><img src="images/youtube-icon.png" alt="YouTube"></a>
                    <a href="#"><img src="images/linkedin-icon.png" alt="LinkedIn"></a>
                </div>
                <div class="footer-links">
                    <div class="footer-column">
                        <h4>Về chúng tôi</h4>
                        <ul>
                            <li><a href="#">Cách đặt chỗ</a></li>
                            <li><a href="#">Liên hệ chúng tôi</a></li>
                            <li><a href="#">Trợ giúp</a></li>
                            <li><a href="#">Tuyển dụng</a></li>
                            <li><a href="#">Giới thiệu</a></li>
                        </ul>
                    </div>
                    <div class="footer-column">
                        <h4>Sản phẩm</h4>
                        <ul>
                            <li><a href="#">Khách sạn</a></li>
                            <li><a href="#">Vé máy bay</a></li>
                            <li><a href="#">Vé xe khách</a></li>
                            <li><a href="#">Vé tàu hỏa</a></li>
                            <li><a href="#">Collaboration feats</a></li>
                            <li><a href="#">Design process</a></li>
                        </ul>
                    </div>
                    <div class="footer-column">
                        <h4>Khác</h4>
                        <ul>
                            <li><a href="#">Blog</a></li>
                            <li><a href="#">Best practices</a></li>
                            <li><a href="#">Colors</a></li>
                            <li><a href="#">Color wheel</a></li>
                            <li><a href="#">Support</a></li>
                            <li><a href="#">Developers</a></li>
                            <li><a href="#">Resource library</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </footer>
        
   
    <script>
        // Fetch and display tours for index.html
        async function loadIndexTours() {
            try {
                const response = await fetch('/api/tours'); // Assuming the API is accessible at this path
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const tours = await response.json();
                const comboContainer = document.getElementById('combo-container-index');
                comboContainer.innerHTML = ''; // Clear existing static content

                if (tours.length === 0) {
                    comboContainer.innerHTML = '<p>Hiện tại không có tour nào.</p>';
                    return;
                }

                tours.forEach(tour => {
                    const tourCard = document.createElement('div');
                    tourCard.classList.add('tour-card');
                    // It seems index.html doesn't link to tour_details.html in the static version.
                    // If you want to add links, uncomment the next lines and ensure tour._id is available.
                    /*
                    tourCard.onclick = () => {
                        window.location.href = `tour_details.html?id=${tour._id}`;
                    };
                    */

                    const imageUrl = tour.images && tour.images.length > 0 ? tour.images[0] : 'images/default-tour.png';
                    const formattedPrice = new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(tour.price);

                    tourCard.innerHTML = `
                        <img src="${imageUrl}" alt="${tour.name}">
                        <div class="tour-info">
                            <h3>${tour.name.toUpperCase()}</h3>
                            <p>${tour.duration.days} ngày ${tour.duration.nights} đêm</p>
                            <p><strong>${tour.destination}</strong></p>
                            <p>${tour.description ? tour.description.substring(0, 100) + '...' : 'Mô tả đang được cập nhật'}</p>
                            <p class="price">${formattedPrice}</p>
                        </div>
                    `;
                    comboContainer.appendChild(tourCard);
                });
            } catch (error) {
                console.error('Failed to load tours for index page:', error);
                const comboContainer = document.getElementById('combo-container-index');
                comboContainer.innerHTML = '<p>Lỗi khi tải danh sách tour. Vui lòng thử lại sau.</p>';
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            loadIndexTours(); // Load tours when DOM is ready
        });
    </script>
</body>
</html>
